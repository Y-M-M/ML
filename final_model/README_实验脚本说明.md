# CRNNè‡ªåŠ¨åŒ–è®­ç»ƒæµ‹è¯•ç³»ç»Ÿ

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œå¯ä»¥è‡ªåŠ¨å®Œæˆæ•°æ®é›†åˆ’åˆ†ã€æ¨¡å‹è®­ç»ƒå’Œæµ‹è¯•è¯„ä¼°çš„å…¨æµç¨‹ã€‚

## ğŸ“ æ–‡ä»¶è¯´æ˜

### æ ¸å¿ƒè„šæœ¬
- `auto_train_test_pipeline.py` - ä¸»è¦çš„è‡ªåŠ¨åŒ–æµç¨‹ç±»
- `run_experiment.py` - ç®€åŒ–çš„å®éªŒè¿è¡Œè„šæœ¬
- `train_crnn.py` - åŸæœ‰çš„è®­ç»ƒè„šæœ¬
- `test_model.py` - åŸæœ‰çš„æµ‹è¯•è„šæœ¬

### æ•°æ®æ–‡ä»¶
- `Dataset/` - åŸå§‹æ•°æ®é›†ç›®å½•
- `Dataset/labels.csv` - æ ‡ç­¾æ–‡ä»¶
- `yolov8_dataset/` - è‡ªåŠ¨ç”Ÿæˆçš„YOLOæ ¼å¼æ•°æ®é›†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼1: ä¸€é”®è¿è¡Œå®Œæ•´æµç¨‹

```bash
# è¿è¡Œå®Œæ•´å®éªŒï¼ˆæ•°æ®åˆ’åˆ† + è®­ç»ƒ + æµ‹è¯•ï¼‰
python run_experiment.py

# è‡ªå®šä¹‰æµ‹è¯•é›†æ¯”ä¾‹ä¸º30%
python run_experiment.py --test-size 0.3

# ä½¿ç”¨ä¸åŒçš„éšæœºç§å­
python run_experiment.py --random-seed 123
```

### æ–¹å¼2: åˆ†æ­¥éª¤è¿è¡Œ

```bash
# ä»…å‡†å¤‡æ•°æ®é›†
python run_experiment.py --prepare-only

# ä»…è¿è¡Œè®­ç»ƒ
python run_experiment.py --skip-test

# ä»…è¿è¡Œæµ‹è¯•
python run_experiment.py --skip-train
```

### æ–¹å¼3: ç›´æ¥ä½¿ç”¨ä¸»è„šæœ¬

```python
from auto_train_test_pipeline import AutoTrainTest

# åˆ›å»ºå®ä¾‹
auto_trainer = AutoTrainTest(test_size=0.2, random_state=42)

# è¿è¡Œå®Œæ•´æµç¨‹
report = auto_trainer.run_full_pipeline()
```

## ğŸ“Š ç³»ç»ŸåŠŸèƒ½

### 1. æ•°æ®é›†åˆ’åˆ†
- âœ… è‡ªåŠ¨ä»`Dataset/`ç›®å½•è¯»å–æ•°æ®
- âœ… æ™ºèƒ½åˆ’åˆ†è®­ç»ƒé›†å’ŒéªŒè¯é›†
- âœ… ç¡®ä¿åŒä¸€å›¾åƒçš„æ‰€æœ‰æ ‡æ³¨åœ¨åŒä¸€é›†åˆä¸­
- âœ… æ”¯æŒè‡ªå®šä¹‰åˆ’åˆ†æ¯”ä¾‹å’Œéšæœºç§å­

### 2. ç›®å½•ç»“æ„ç®¡ç†
- âœ… è‡ªåŠ¨åˆ›å»º`yolov8_dataset/`ç›®å½•ç»“æ„
- âœ… å¤åˆ¶å›¾åƒåˆ°å¯¹åº”çš„è®­ç»ƒ/éªŒè¯ç›®å½•
- âœ… ç”ŸæˆYOLOæ ¼å¼çš„`data.yaml`é…ç½®æ–‡ä»¶

### 3. è‡ªåŠ¨åŒ–è®­ç»ƒ
- âœ… è°ƒç”¨ç°æœ‰çš„`train_crnn.py`è„šæœ¬
- âœ… æ•è·è®­ç»ƒè¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯
- âœ… æ”¯æŒè®­ç»ƒè¶…æ—¶æ§åˆ¶ï¼ˆé»˜è®¤1å°æ—¶ï¼‰

### 4. è‡ªåŠ¨åŒ–æµ‹è¯•
- âœ… è°ƒç”¨ç°æœ‰çš„`test_model.py`è„šæœ¬
- âœ… æ•è·æµ‹è¯•ç»“æœå’Œæ€§èƒ½æŒ‡æ ‡
- âœ… æ”¯æŒæµ‹è¯•è¶…æ—¶æ§åˆ¶ï¼ˆé»˜è®¤30åˆ†é’Ÿï¼‰

### 5. å®éªŒæŠ¥å‘Š
- âœ… è‡ªåŠ¨ç”Ÿæˆè¯¦ç»†çš„JSONæ ¼å¼å®éªŒæŠ¥å‘Š
- âœ… æå–å…³é”®æ€§èƒ½æŒ‡æ ‡
- âœ… è®°å½•å®Œæ•´çš„å®éªŒé…ç½®å’Œæ—¶é—´æˆ³

## ğŸ“ˆ è¾“å‡ºç»“æœ

### ç›®å½•ç»“æ„
```
project/
â”œâ”€â”€ Dataset/                    # åŸå§‹æ•°æ®
â”œâ”€â”€ yolov8_dataset/            # è‡ªåŠ¨ç”Ÿæˆ
â”‚   â””â”€â”€ images/
â”‚       â”œâ”€â”€ train/             # è®­ç»ƒé›†å›¾åƒ
â”‚       â””â”€â”€ val/               # éªŒè¯é›†å›¾åƒ
â”œâ”€â”€ results/                   # å®éªŒç»“æœ
â”‚   â””â”€â”€ experiment_report_*.json
â””â”€â”€ data.yaml                  # YOLOé…ç½®æ–‡ä»¶
```

### å®éªŒæŠ¥å‘Š
æŠ¥å‘ŠåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
- å®éªŒé…ç½®ï¼ˆæ—¶é—´æˆ³ã€æ•°æ®åˆ’åˆ†æ¯”ä¾‹ã€éšæœºç§å­ï¼‰
- è®­ç»ƒç»“æœï¼ˆæˆåŠŸçŠ¶æ€ã€è¾“å‡ºã€æ€§èƒ½æŒ‡æ ‡ï¼‰
- æµ‹è¯•ç»“æœï¼ˆæˆåŠŸçŠ¶æ€ã€è¾“å‡ºã€æ€§èƒ½æŒ‡æ ‡ï¼‰
- é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰

## âš™ï¸ é…ç½®é€‰é¡¹

### å‘½ä»¤è¡Œå‚æ•°
- `--test-size`: æµ‹è¯•é›†æ¯”ä¾‹ï¼ˆé»˜è®¤0.2ï¼Œå³20%ï¼‰
- `--random-seed`: éšæœºç§å­ï¼ˆé»˜è®¤42ï¼‰
- `--skip-train`: è·³è¿‡è®­ç»ƒæ­¥éª¤
- `--skip-test`: è·³è¿‡æµ‹è¯•æ­¥éª¤
- `--prepare-only`: ä»…å‡†å¤‡æ•°æ®é›†

### å¯ä¿®æ”¹å‚æ•°
åœ¨è„šæœ¬ä¸­å¯ä»¥ä¿®æ”¹çš„å‚æ•°ï¼š
- è¶…æ—¶æ—¶é—´ï¼ˆè®­ç»ƒ1å°æ—¶ï¼Œæµ‹è¯•30åˆ†é’Ÿï¼‰
- ç›®å½•è·¯å¾„
- è„šæœ¬æ–‡ä»¶å

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¼ºå°‘ä¾èµ–åŒ…**
```bash
pip install pandas scikit-learn opencv-python pillow torch torchvision
```

2. **æ‰¾ä¸åˆ°æ–‡ä»¶**
ç¡®ä¿ä»¥ä¸‹æ–‡ä»¶å­˜åœ¨ï¼š
- `Dataset/labels.csv`
- `train_crnn.py`
- `test_model.py`

3. **æƒé™é—®é¢˜**
```bash
chmod +x run_experiment.py
```

4. **å†…å­˜ä¸è¶³**
- å‡å°‘æ‰¹æ¬¡å¤§å°
- å‡å°‘è®­ç»ƒè½®æ•°
- ä½¿ç”¨CPUè€ŒéGPU

### è°ƒè¯•æŠ€å·§

1. **ä»…å‡†å¤‡æ•°æ®é›†æµ‹è¯•**
```bash
python run_experiment.py --prepare-only
```

2. **æŸ¥çœ‹è¯¦ç»†è¾“å‡º**
å®éªŒæŠ¥å‘Šä¼šä¿å­˜åœ¨`results/`ç›®å½•ä¸­ï¼ŒåŒ…å«å®Œæ•´çš„è®­ç»ƒå’Œæµ‹è¯•è¾“å‡ºã€‚

3. **åˆ†æ­¥æ‰§è¡Œ**
```bash
# å…ˆå‡†å¤‡æ•°æ®
python run_experiment.py --prepare-only

# å†æ‰§è¡Œè®­ç»ƒ
python run_experiment.py --skip-test

# æœ€åæ‰§è¡Œæµ‹è¯•
python run_experiment.py --skip-train
```

## ğŸ“ ç¤ºä¾‹ç”¨æ³•

### åŸºç¡€ä½¿ç”¨
```bash
# é»˜è®¤é…ç½®è¿è¡Œ
python run_experiment.py

# æŸ¥çœ‹å¸®åŠ©
python run_experiment.py --help
```

### é«˜çº§é…ç½®
```bash
# ä½¿ç”¨30%ä½œä¸ºæµ‹è¯•é›†ï¼Œéšæœºç§å­ä¸º123
python run_experiment.py --test-size 0.3 --random-seed 123

# ä»…å‡†å¤‡æ•°æ®é›†å’Œè®­ç»ƒ
python run_experiment.py --skip-test

# å¿«é€ŸéªŒè¯æ•°æ®é›†åˆ’åˆ†
python run_experiment.py --prepare-only
```

### Pythonä»£ç ä½¿ç”¨
```python
from auto_train_test_pipeline import AutoTrainTest

# åˆ›å»ºå®ä¾‹å¹¶è¿è¡Œ
trainer = AutoTrainTest(test_size=0.25, random_state=100)
report = trainer.run_full_pipeline()

# æŸ¥çœ‹ç»“æœ
print(f"è®­ç»ƒæˆåŠŸ: {report['training']['success']}")
print(f"æµ‹è¯•æˆåŠŸ: {report['testing']['success']}")
```

## ğŸ’¡ æç¤º

1. **é¦–æ¬¡è¿è¡Œ**å»ºè®®ä½¿ç”¨`--prepare-only`å…ˆæ£€æŸ¥æ•°æ®é›†åˆ’åˆ†
2. **é•¿æ—¶é—´è®­ç»ƒ**å¯ä»¥ä½¿ç”¨`nohup`åœ¨åå°è¿è¡Œ
3. **å¤šæ¬¡å®éªŒ**ä¿®æ”¹éšæœºç§å­å¯ä»¥å¾—åˆ°ä¸åŒçš„æ•°æ®åˆ’åˆ†
4. **è°ƒè¯•æ¨¡å¼**å¯ä»¥å…ˆè·³è¿‡è€—æ—¶çš„è®­ç»ƒæˆ–æµ‹è¯•æ­¥éª¤

---

ğŸ“§ å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥å®éªŒæŠ¥å‘Šä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚ 


# éªŒæ”¶æµ‹è¯•
process_labels.py  ä¿®æ”¹labels.csvæ–‡ä»¶çš„è·¯å¾„ï¼Œè¿è¡Œå³å¯è¾“å‡ºæ•°æ®åˆ°results.csvæ–‡ä»¶
